---
title: 'Apple Push Notification Service (APNS)'
sidebarTitle: 'APNS'
description: 'Learn how to use the Apple Push Notification Service (APNS) provider to send push notifications using Novu'
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';

This guide will walk you through the entire process of configuring and using the <a href="https://docs.expo.dev/push-notifications/overview/" target="_blank" rel="noopener noreferrer">Apple Push Notification Service (APNS)</a> with Novu.

## How to configure APNS with Novu

Before you can send notifications, you must configure your Apple Developer account to get the necessary credentials and add them to your Novu integration.

### Step 1: Get your APNS credentials

Apple provides two authentication methods to make a secure connection to APNs. The first is a certificate based authentication (using a `.p12` certificate). The second is token based authentication (using a `.p8` key). We'll make use of the `.p8` key.

To enable APNS integration, create an <a href="https://developer.apple.com/" target="_blank" rel="noopener noreferrer">Apple Developer account</a> with an [Admin role](https://appstoreconnect.apple.com/access/users).

Follow <a href="https://developer.apple.com/help/account/keys/create-a-private-key" target="_blank" rel="noopener noreferrer">this Apple’s official guide</a> to generate and download the p8 key for your account.

You also need the following to connect Novu to APNs:

* <a href="https://developer.apple.com/help/account/keys/get-a-key-identifier/" target="_blank" rel="noopener noreferrer">**Key ID**</a>: This is a 10-character unique identifier for the authentication key. You can find it in the key details section of the newly created key in your Apple developer account.
* **Team ID**: This is available in your Apple developer account.
* **Bundle ID**: This is the ID of your app. You can find it in the app info section of your Apple developer account.

### Step 2: Connect APNS to Novu

Next, add these credentials to your APNS integration in the Novu dashboard.

1. Log in to the Novu dashboard
2. On the Novu dashboard, navigate to the **Integration Store**.
3. Click **Connect provider**.
4. In the **Push** tab, select **APNS**.
5. In the APNS integration form, fill in the **Name** and **Identifier** fields and in the **Delivery Provider Crendetials** section fill in the following fields:
  * **Private Key**: The content of your `.p8` file.
  * **Key ID**: Your 10-character Key ID.
  * **Team ID**: Your 10-character Team ID.
  * **Bundle ID**: Your app's Bundle ID.
![APNS Integration in Novu](/images/channels-and-providers/push/apns/apns-integration.png)
6. Click **Create Integration**.

## Using APNS with Novu

Once your integration is configured, you can start sending push notifications by registering your subscribers' device tokens and triggering a workflow.

### Step 1: Add subscriber device token

Before Novu can send a push notification to a subscriber(user), you must associate their device's unique push token with their Novu subscriber profile.

You can do this by making an API call to [update the subscriber's credentials](/api-reference/subscribers/update-provider-credentials).

<Tabs items={['Node.js', 'cURL']}>
<Tab value="Node.js">
```typescript
import { Novu } from '@novu/api';
import { ChatOrPushProviderEnum } from "@novu/api/models/components";

const novu = new Novu({
  secretKey: "<NOVU_SECRET_KEY>",
  // Use serverURL for EU region
  // serverURL: "[https://eu.api.novu.co](https://eu.api.novu.co)",
});

await novu.subscribers.credentials.update(
  {
    providerId: ChatOrPushProviderEnum.Apns,
    // Use integrationIdentifier to store device tokens for a specific integration
    integrationIdentifier: "string",
    credentials: {
      deviceTokens: ["token1", "token2", "token3"],
    },
  },
  "subscriberId"
);
```
</Tab>
<Tab value="cURL">
```bash
curl -L -X PUT 'https://api.novu.co/v1/subscribers/<SUBSCRIBER_ID>/credentials' \
-H 'Content-Type: application/json' \
-H 'Accept: application/json' \
-H 'Authorization: ApiKey <NOVU_SECRET_KEY>' \
-d '{
  "providerId": "apns",
  "deviceTokens": ["token1", "token2"],
  "integrationIdentifier": "string"
}'
```
</Tab>
</Tabs>

### Step 2: Send a notification

Now you're ready to send a push notification. [Create a workflow with a Push step](/platform/workflow/build-a-workflow) and trigger it. Novu will send the notification to all devices associated with the subscriber.

The example below demonstrates a simple trigger using Novu’s SDK.

```typescript
import { Novu } from '@novu/node';

const novu = new Novu('<NOVU_SECRET_KEY>');

await novu.trigger('your-workflow-id', {
  to: {
    subscriberId: 'SUBSCRIBER_ID',
  },
  payload: {
    // Your payload data
  },
});
```

## Using overrides to customize notifications

Novu provides an overrides field that lets you send additional APNS-specific payload fields. You can use this to control how messages are displayed or to attach custom data.

The overrides field supports all <a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification?language=objc" target="_blank" rel="noopener noreferrer">APNS Notification payload</a> values. Here is an example:

```typescript
import { Novu } from '@novu/api';

const novu = new Novu({
  secretKey: "<NOVU_SECRET_KEY>",
  // Use serverURL for EU region
  // serverURL: "https://eu.api.novu.co",
});

await novu.trigger({
  workflowId: "workflowId",
  to: {
    subscriberId: "subscriberId",
  },
  payload: {
    abc: 'def', // If the notification is a data notification, the payload will be sent as the data
  },
  overrides: {
    apns: {
      payload: {
        aps: {
          notification: {
            title: 'Test',
            body: 'Test push',
          },
          data: {
            key: 'value',
          },
        },
      },
    },
  },
});
```
